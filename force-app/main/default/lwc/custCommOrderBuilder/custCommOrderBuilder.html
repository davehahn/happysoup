<!--
 - Created by dave on 2020-04-10.
 -->

<!-- Cust Comm Order Builder -->
<template>
  <main>
    <template if:false={boatDetailsLoaded}>
      <c-legend-spinner visible="true"></c-legend-spinner>
    </template>

    <div class="lgnd-order-builder" if:true={boatDetailsLoaded}>
      <c-legend-spinner></c-legend-spinner>

      <header class="config-header">

        <div class="branding">
          <h1 class="main-logo">
            <span class="vh">Legend Boats - Boat Builder</span>
            <button onclick={handleHomeNav} data-click-focus="unset"><img src={logo}></button>
          </h1>
        </div>

        <nav class="config-nav">
          <h2 class="vh">Main Navigation</h2>
          <ol class="config-nav-list">
            <template for:each={processPages} for:item="page">
              <li key={page.label}>
                <button class={page.class} onclick={handleNav} data-click-focus="unset" data-nav-name={page.label}><h3 class="config-nav-title">{page.label}</h3></button>
              </li>
            </template>
          </ol>
        </nav>

        <div class="language-select">

        </div>

      </header>

      <div class="config-content" data-current={currentPage}>

        <!-- PERFORMANCE -->
        <section class="config-page config-page_selected" data-page="performance">
          <div class="config-page_left">
            <h2 class="vh">Performance</h2>
            <c-cust-comm-order-boat-image size="large" page='performance' marketing-content= {boat.marketingContent}></c-cust-comm-order-boat-image>
            <c-cust-comm-order-motor-stats motor-details={motorDetails}></c-cust-comm-order-motor-stats>
          </div>
          <div class="config-page_right slds-p-around_xx-large">
            <h3 class="right_heading">Select Your Performance</h3>
            <c-cust-comm-order-options options-title="Standard Performance" selections="one" selection-scope="global" options={boat.standardMotor} parent-product-sku={boat.id} boat-retail-price={boat.retailPrice} is-init="true" trigger-ui-change="true" page='performance' grouping-name="motor_options"></c-cust-comm-order-options>
            <c-cust-comm-order-options options-title="Enhanced Performance" selections="one" selection-scope="global" options={boat.motorUpgrades} parent-product-sku={boat.id} boat-retail-price={boat.retailPrice} trigger-ui-change="true" page='performance' grouping-name="motor_options"></c-cust-comm-order-options>
          </div>
        </section>

        <!-- TRAILERING -->
        <section class="config-page" data-page="trailering">
          <div class="config-page_left">
            <h2 class="vh">Trailering</h2>
            <template if:false={isMobile}>
              <c-cust-comm-order-boat-image size="large" page='trailering' marketing-content= {boat.marketingContent}></c-cust-comm-order-boat-image>
            </template>
          </div>
          <div class="config-page_right slds-p-around_xx-large">
            <h3 class="right_heading">Trailering Package</h3>
            <c-cust-comm-order-options options-title="Select Your Trailer" selections="one" selection-scope="local" is-init="true" options={traileringOptions} parent-product-sku={boat.id} show-option-price="true" boat-retail-price={boat.retailPrice} layout-type="alt-swatch" grouping-name="trailer_options" page='trailering'></c-cust-comm-order-options>
            <!--<c-cust-comm-order-options selections="one" selection-scope="global" options={boat.trailerUpgrades} show-option-price="true" boat-retail-price={boat.retailPrice} page='trailering'></c-cust-comm-order-options>-->
            <c-cust-comm-order-options options-title="More Trailering Options" selections="multiple" selection-scope="local" options={boat.optionalProducts.canvas} parent-product-sku={boat.id} show-option-price="true" boat-retail-price={boat.retailPrice} page='trailering'></c-cust-comm-order-options>
            <c-cust-comm-order-options selections="multiple" selection-scope="local" options={boat.standardMotor} sub-section="optionalProducts.trailerAccessories" addons="true" show-option-price="true" boat-retail-price={boat.retailPrice} page='trailering' parent-page='performance'></c-cust-comm-order-options>
            <c-cust-comm-order-options selections="multiple" selection-scope="local" options={boat.motorUpgrades} sub-section="optionalProducts.trailerAccessories" addons="true" show-option-price="true" boat-retail-price={boat.retailPrice} page='trailering' parent-page='performance'></c-cust-comm-order-options>
          </div>
        </section>

        <!-- ELECTRONICS -->
        <section class="config-page" data-page="electronics">
          <div class="config-page_left">
            <h2 class="vh">Electronics</h2>
            <template if:false={isMobile}>
              <c-cust-comm-order-boat-image size="large" page='electronics' marketing-content= {boat.marketingContent}></c-cust-comm-order-boat-image>
            </template>
          </div>
          <div class="config-page_right slds-p-around_xx-large">
            <h3 class="right_heading"><span class="vh">Choose Your</span> Electronics</h3>
            <c-cust-comm-order-options options-title="Terrova 55 Tech Package" options={boat.optionalProducts.electronics} parent-product-sku={boat.id} show-option-price="true" boat-retail-price={boat.retailPrice} page='electronics'></c-cust-comm-order-options>
          </div>
        </section>


        <!-- PAYMENT -->
        <section class="config-page" data-page="payment">
          <h2 class="vh">Payment Form</h2>
          <div class="config-page_left">
            <button class="edit-config" onclick={handleEditConfig}>
              <i class="slds-icon-chevronleft"></i>
              <span>Edit Design</span>
            </button>
            <div class="account-details">
              <h3 class="form-header">Enter Account Details</h3>
              <lightning-layout multiple-rows="true">

                <lightning-layout-item padding="horizontal-small"
                                       data-name="firstName"
                                       size="12"
                                       small-device-size="12"
                                       medium-device-size="6"
                                       large-device-size="6">
                  <div class="form-input">
                    <label>First Name</label>
                    <input label="First Name" data-id="firstName" type="text">
                  </div>
                </lightning-layout-item>

                <lightning-layout-item padding="horizontal-small"
                                       size="12"
                                       small-device-size="12"
                                       medium-device-size="6"
                                       large-device-size="6">
                  <div class="form-input">
                    <label>Last Name</label>
                    <input label="Last Name" data-id="lastName" type="text">
                  </div>
                </lightning-layout-item>

                <lightning-layout-item padding="horizontal-small"
                                       size="12"
                                       small-device-size="12"
                                       medium-device-size="6"
                                       large-device-size="6">
                  <div class="form-input">
                    <label>Email Address</label>
                    <input label="Email Address" data-id="email" type="text">
                  </div>
                </lightning-layout-item>

                <lightning-layout-item padding="horizontal-small"
                                       size="12"
                                       small-device-size="12"
                                       medium-device-size="6"
                                       large-device-size="6">
                  <div class="form-input">
                    <label>Phone Number</label>
                    <input label="Phone Number" data-id="phone" type="text">
                  </div>
                </lightning-layout-item>

                <lightning-layout-item padding="horizontal-small"
                                       size="12"
                                       small-device-size="12"
                                       medium-device-size="6"
                                       large-device-size="6">
                  <div class="form-input form-input--select">
                    <label>Province or Territory</label>
                    <span></span>
                    <select label="Province or Territory" data-id="state">
                      <option value=""> -- Select One -- </option>
                      <option value="Alberta">Alberta</option>
                      <option value="British Columbia">British Columbia</option>
                      <option value="Manitoba">Manitoba</option>
                      <option value="New Brunswick">New Brunswick</option>
                      <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                      <option value="Northwest Territories">Northwest Territories</option>
                      <option value="Nova Scotia">Nova Scotia</option>
                      <option value="Nunavut">Nunavut</option>
                      <option value="Ontario">Ontario</option>
                      <option value="Prince Edward Island">Prince Edward Island</option>
                      <option value="Quebec">Quebec</option>
                      <option value="Saskatchewan">Saskatchewan</option>
                      <option value="Yukon">Yukon</option>
                    </select>
                  </div>
                </lightning-layout-item>

              </lightning-layout>
            </div>

            <div class="payment-details">
              <h3 class="form-header">Payment</h3>
              <div class="payment-disclaimer">
                Due today to complete your order:
                <lightning-formatted-number value={paymentAmount}
                                            format-style="percent"
                                            maximum-fraction-digits="2"></lightning-formatted-number>
                .
              </div>
            </div>

            <div class="payment-form">
              <h3 class="form-header">Payment Card Details</h3>
              <c-square-payment-form apex-page-name="/apex/Square_PaymentForm_CustomerCommunity"
                                     is-responsive="true"
                                     width-break-point="1401"
                                     small-height="184"
                                     large-height="368"></c-square-payment-form>
              <div class="payment-disclaimer">
                I allow Legend Boats to save my payment instrument information for future transactions pursuant to the <a href="#" target="_blank">Payment Terms for Services</a>
              </div>
            </div>

          </div>

          <aside class="config-page_right slds-p-around_xx-large">
            <c-cust-comm-order-boat-image size="small" page='summary' marketing-content= {boat.marketingContent}></c-cust-comm-order-boat-image>
            <h2 class="right_heading slds-text-heading_medium">Your X18</h2>
            <p class="right_delivery">Estimated Deliver: 5-8 weeks</p>
            <c-cust-comm-order-summary></c-cust-comm-order-summary>
          </aside>

        </section>

      </div>

      <div class="config-footer">
        <div class="config-footer_content">

          <div class="config-footer_item finance-type">
            <div class="financetype-selector_container">
              <div class="financetype-selector_button"
                   role="button"
                   tabindex="0"
                   data-click-focus="unset"
                   onclick={openFinanceSelect}>
                {paymentType}
                <i class="slds-icon-chevrondown"></i>
              </div>
              <ul class="financetype-selector_options" role="tablist">
                <li role="tab"
                    tabindex="-1"
                    class="financetype-selector_option selected"
                    data-value="cash"
                    onclick={handlePaymentTypeSelect}>
                  cash
                </li>
                <li role="tab"
                    tabindex="-1"
                    class="financetype-selector_option"
                    data-value="loan"
                    onclick={handlePaymentTypeSelect}>
                  loan
                </li>
              </ul>
            </div>
          </div>

          <div class="config-footer_item finance-prices">
            <c-cust-comm-order-purchase-price payment-type={paymentType}
                                              boat-sku={boat.id}
                                              boat-retail-price={boat.retailPrice}></c-cust-comm-order-purchase-price>
            <div class="config-footer_savings">
              <div class="amount">{premiumPackValue}</div>
              <div class="label">Preferred equipment package savings</div>
            </div>
            <div class="config-footer_details-link">
              <a onclick={handleOpenModal} tabindex="0" data-click-focus="unset">Show Details</a>
            </div>
          </div>

          <div class="config-footer_item">
            <div class="config-footer_delivery">
              <div>Estimated Deliver: 5-8 weeks</div>
            </div>
          </div>

          <template if:false={isMobile}>
            <div class="config-footer_item">
              <button disabled={buttonDisabled}
                      data-click-focus="unset"
                      onclick={handleNext}>
                {buttonText}
              </button>
            </div>
          </template>
          <template if:true={isMobile}>
            <div class="config-footer_item">
              <button disabled={buttonDisabled}
                      data-click-focus="unset"
                      onclick={jumpToPayment}>
                {buttonText}
              </button>
            </div>
          </template>

        </div>
      </div>

      <aside class="modal-container">
        <h2 class="vh">Additional Details</h2>
        <div class="modal-content">
          <div class="modal-content_body">
            <nav class="modal-content_sidebar">
              <h3 class="vh">Overlay Navigation</h3>
              <div class="sidebar_logo">
                <img src={vertLogo}>
              </div>
              <ul class="sidebar_nav">
                <template for:each={modalPages} for:item="modalPage">
                  <li key={modalPage.label}>
                    <button class={modalPage.class} onclick={handleModalNav} data-modal-nav-name={modalPage.label}><h4 class="modal-nav-title">{modalPage.title}</h4></button>
                  </li>
                </template>
              </ul>
            </nav>
            <article class="modal-content_main">
              <section class="modal-page modal-page_selected" data-modal-page="payment-calculator">
                <template if:true={purchasePrice}>
                  <c-boat-res-finance-details payment-type={paymentType}
                                              amount={purchasePrice}
                                              deposit={paymentAmount}
                                              interest-rate={interestRate}
                                              amort={term}
                                              premium-pack-value={boat.premiumPackage.value}
                                              premium-pack-items={premiumPackItems}></c-boat-res-finance-details>
                </template>
              </section>
              <section class="modal-page" data-modal-page="premium-package">
                <h3 class="modal-heading">Preferred Equipment Package</h3>
                <ul class="premiumPackage">
                  <template for:each={premiumPackItems} for:item="item">
                    <li key={item} class="premiumPackage_item">{item}</li>
                  </template>
                </ul>
                <p class="premiumPackage_value">Value: <span>{premiumPackValue}</span></p>
              </section>
              <section class="modal-page" data-modal-page="delivery">
                <h3 class="modal-heading">Delivery Timing</h3>
              </section>
              <span class="modal-content_close">
                <button onclick={handleCloseModal}>
                  <i class="slds-icon-close" ></i>
                </button>
              </span>
            </article>
          </div>
        </div>
      </aside>
    </div>
  </main>
</template>
