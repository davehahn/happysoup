<aura:component controller="DealerOrder_Ext">
  <aura:attribute name="dealerOrder" type="Dealer_Order__c" />
  <aura:attribute name="lineItems" type="Object" />
  <aura:attribute name="boats" type="Array" />
  <aura:attribute name="motors" type="Array" />
  <aura:attribute name="trailers" type="Array"   />
  <aura:attribute name="trollingMotors" type="Array" />
  <aura:attribute name="userType" type="String" />
  <aura:attribute name="isEditable" type="Boolean" default="false" />
  <aura:attribute name="inOrderBuilder" type="Boolean" default="false" />
  <aura:attribute name="moreDetails" type="Boolean" default="false" />

  <!-- EVENTS -->
  <aura:registerEvent name="actionEvent"
                      type="c:lgndP_DealerOrderLinesTableAction_Event" />
  <aura:handler name="deleteEvent"
                event="c:lgndP_DealerOrderLinesTable_Delete_Event"
                action="{!c.handleDelete}" />
  <!-- METHODS -->
  <aura:method name="doInit" access="public" />

  <c:lgnd_Confirm aura:id="lgnd-confirm"/>

  <div class="slds-spinner_container toggle" aura:id="busy-indicator">
    <div role="status" class="slds-spinner slds-spinner--medium">
      <span class="slds-assistive-text">Loading</span>
      <div class="slds-spinner__dot-a"></div>
      <div class="slds-spinner__dot-b"></div>
    </div>
  </div>


  <div class="slds-clearfix slds-m-bottom_medium">
    <lightning:buttonGroup class="slds-float_right slds-m-right_medium">
      <lightning:button label="{!if( v.moreDetails, 'Less Details', 'More Details' ) }"
                      onclick="{! c.detailToggle }" />
      <aura:if isTrue="{!and(v.isEditable, !v.inOrderBuilder)}">
        <lightning:button label="Add"
                          onclick="{! c.handleAdd }" />
        <aura:if isTrue="{!equals(v.dealerOrder.Stage__c, 'Draft')}">
          <lightning:button label="Submit"
                            onclick="{! c.handleSubmit }"/>
        </aura:if>
      </aura:if>
      <lightning:button label="Refresh Items"
                        onclick="{!c.refreshItems}" />
    </lightning:buttonGroup>
  </div>


  <aura:if isTrue="{!not(v.moreDetails)}">
    <c:lgndP_DealerOrderLinesTable boats="{!v.boats}"
                                   motors="{!v.motors}"
                                   trailers="{!v.trailers}"
                                   trollingMotors="{!v.trollingMotors}"
                                   isEditable="{!v.isEditable}" />
  </aura:if>

  <aura:if isTrue="{!v.moreDetails}">
    <c:lgndP_DealerOrderLinesTable_More boats="{!v.boats}"
                                        motors="{!v.motors}"
                                        trailers="{!v.trailers}"
                                        trollingMotors="{!v.trollingMotors}"
                                        isEditable="{!v.isEditable}" />
  </aura:if>

</aura:component>