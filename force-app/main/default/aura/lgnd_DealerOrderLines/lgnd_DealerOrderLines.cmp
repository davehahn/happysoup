<aura:component controller="DealerOrder_Ext"
                implements="force:appHostable,flexipage:availableForAllPageTypes,forceCommunity:availableForAllPageTypes,force:hasRecordId"
                access="global">

  <aura:attribute name="recordId" type="Id" access="global" />
  <aura:attribute name="dealerOrder" type="Dealer_Order__c" access="global" />
  <aura:attribute name="isEditing" type="Boolean" default="false" access="global"/>
  <aura:attribute name="isViewing" type="Boolean" default="false" access="global"/>
  <aura:attribute name="currentView" type="String" default="list" />
  <aura:attribute name="userType" type="String" />
  <aura:attribute name="detailsBtnText" type="String" default="More Details" />
  <aura:attribute name="promotionMessage" type="Map" default="{}" />

  <!-- EVENTS -->
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <aura:handler name="actionEvent"
                event="c:lgndP_DealerOrderLinesTableAction_Event"
                action="{!c.handleAction}" />
  <aura:handler event="c:lgndP_BusyIndicator_Event"
                action="{!c.handleIndicator}" />

  <aura:handler name="change" value="{!v.isEditing}" action="{!c.handleEditChange}" />
  <aura:handler name="change" value="{!v.isViewing}" action="{!c.handleViewChange}" />
  <aura:handler event="force:refreshView" action="{!c.doInit}" />


  <div>
<!--    <div class="slds-spinner_container toggle" aura:id="busy-indicator">-->
<!--      <div role="status" class="slds-spinner slds-spinner&#45;&#45;medium">-->
<!--        <span class="slds-assistive-text">Loading</span>-->
<!--        <div class="slds-spinner__dot-a"></div>-->
<!--        <div class="slds-spinner__dot-b"></div>-->
<!--      </div>-->
<!--      <aura:if isTrue="{! !empty(v.busyMessage)}">-->
<!--        <div class="spinner-text">{!v.busyMessage} ..</div>-->
<!--      </aura:if>-->
<!--    </div>-->

    <c:Lgnd_Spinner_dh aura:id="busy-indicator" />

    <!-- +++++ DISCOUNT NOTIFICATION CENTER +++++++ -->
    <c:lgndp_PartnerProgramNotification message="{!v.promotionMessage}" />
    <!-- ====== DISCOUNT NOTIFICATION CENTER ======= -->

    <aura:if isTrue="{!equals(v.currentView, 'list')}">
      <c:lgndP_DealerOrderLinesList dealerOrder="{!v.dealerOrder}"
                                     userType="{!v.userType}"
                                     aura:id="dealerOrderLines--Cmp" />
    </aura:if>

    <aura:if isTrue="{!equals(v.currentView, 'edit')}">
      <c:lgndP_DealerOrderBuildBoat dealerOrder="{!v.dealerOrder}"
                                    inOrderView="true"
                                    isEditing="{!v.isEditing}"
                                    promotionMessage="{!v.promotionMessage}"
                                    isFactoryStore="{!v.dealerOrder.Account__r.Is_Internal__c}"
                                    aura:id="dealerOrderBuildBoat--Cmp" />
    </aura:if>

    <aura:if isTrue="{!equals(v.currentView, 'view')}">
      <c:lgndP_DealerOrderLineView dealerOrder="{!v.dealerOrder}"
                                   isViewing="{!v.isViewing}"
                                   aura:id="dealerOrderLineView--Cmp" />
    </aura:if>
  </div>

</aura:component>